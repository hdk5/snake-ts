!function(e){function t(a){if(n[a])return n[a].exports;var r=n[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,a){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:a})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=4)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t}return a(e,[{key:"reverse",value:function(){switch(this){case e.Left:return e.Right;case e.Right:return e.Left;case e.Up:return e.Down;case e.Down:return e.Up}}}]),e}();r.Up=new r("Up"),r.Down=new r("Down"),r.Left=new r("Left"),r.Right=new r("Right"),t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return a(e,null,[{key:"mod",value:function(e,t){return(e%t+t)%t}},{key:"choice",value:function(e){return e[Math.floor(Math.random()*e.length)]||null}},{key:"arrayClone",value:function(e){var t=[],n=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){var o=i.value;t.push(o.clone())}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}return t}},{key:"arrayContains",value:function(e,t){var n=!0,a=!1,r=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done);n=!0){if(i.value.equals(t))return!0}}catch(e){a=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(a)throw r}}return!1}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._row=t,this._column=n}return a(e,[{key:"clone",value:function(){return new e(this._row,this._column)}},{key:"equals",value:function(e){return this.row==e.row&&this.column==e.column}},{key:"row",get:function(){return this._row},set:function(e){this._row=e}},{key:"column",get:function(){return this._column},set:function(e){this._column=e}}]),e}();t.default=r},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=a(n(2)),o=a(n(0)),u=a(n(6)),f=a(n(1)),c=a(n(19)),d=a(n(20)),s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._htmlHelper=new d.default(this,t),this._canvasHelper=new u.default(this),this._htmlHelper.gameInit(),this.canvas.tabIndex=0,this.canvas.onkeydown=function(e){switch(e.keyCode){case 37:n._player.direction=o.default.Left;break;case 38:n._player.direction=o.default.Up;break;case 39:n._player.direction=o.default.Right;break;case 40:n._player.direction=o.default.Down}},console.log("Game object created.")}return i(e,[{key:"gameOver",value:function(){this._htmlHelper.gameOver()}},{key:"initGame",value:function(e,t){this._htmlHelper.gameProgress(),this._difficulty=e,this._field=t.field.clone(),this._snakes=f.default.arrayClone(t.snakes),this._food=this.createFood(),this._score=0,this.canvas.focus(),cancelAnimationFrame(this._frameId),this._lastFrameTimeStamp=performance.now(),this._frameId=requestAnimationFrame(this.animationLoop.bind(this))}},{key:"createFood",value:function(){for(var e=[],t=0;t<this._field.height;++t)for(var n=0;n<this._field.width;++n)e.push(new l.default(t,n));e:for(var a=e.length-1;a>=0;--a){var r=!0,i=!1,o=void 0;try{for(var u,c=this._field.blocks[Symbol.iterator]();!(r=(u=c.next()).done);r=!0){var d=u.value;if(e[a].equals(d)){e.splice(a,1);continue e}}}catch(e){i=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(i)throw o}}var s=!0,A=!1,h=void 0;try{for(var m,w=this._snakes[Symbol.iterator]();!(s=(m=w.next()).done);s=!0){var p=m.value,y=!0,v=!1,g=void 0;try{for(var _,k=p.snake[Symbol.iterator]();!(y=(_=k.next()).done);y=!0){var b=_.value;if(e[a].equals(b)){e.splice(a,1);continue e}}}catch(e){v=!0,g=e}finally{try{!y&&k.return&&k.return()}finally{if(v)throw g}}}}catch(e){A=!0,h=e}finally{try{!s&&w.return&&w.return()}finally{if(A)throw h}}}return f.default.choice(e)}},{key:"animationLoop",value:function(t){var n=this;if(t-this._lastFrameTimeStamp<1e3/this._difficulty)requestAnimationFrame(this.animationLoop.bind(this));else{this._lastFrameTimeStamp=t,this._htmlHelper.gameScore=this._score,this._canvasHelper.drawField(this._field),this._canvasHelper.drawFood(this._food),this._canvasHelper.drawSnake(this._player,u.default.SnakeType.Player);var a=!0,i=!1,l=void 0;try{for(var o,f=this._enemies[Symbol.iterator]();!(a=(o=f.next()).done);a=!0){var d=o.value;this._canvasHelper.drawSnake(d,u.default.SnakeType.Enemy)}}catch(e){i=!0,l=e}finally{try{!a&&f.return&&f.return()}finally{if(i)throw l}}var s=function(t){var a=[];a.push.apply(a,r(n._field.blocks));var i=!0,l=!1,o=void 0;try{for(var u,f=n._snakes.filter(function(e){return e!=t})[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var d=u.value;a.push.apply(a,r(d.snake))}}catch(e){l=!0,o=e}finally{try{!i&&f.return&&f.return()}finally{if(l)throw o}}a.push.apply(a,r(t.snake.slice(1))),t!=n._player&&(t.direction=c.default.decide(t.snake[0],n._food,a,n._field.height,n._field.width));return e.checkCollisions([t.snake[0]],a)?(t.alive=!1,"continue"):(t.move(),t.snake[0].equals(n._food)?(t.feed(),n._food=n.createFood(),t==n._player&&(n._score+=n._difficulty),"break"):void 0)},h=!0,m=!1,w=void 0;try{e:for(var p,y=this._snakes.filter(function(e){return e.alive})[Symbol.iterator]();!(h=(p=y.next()).done);h=!0){switch(s(p.value)){case"continue":continue;case"break":break e}}}catch(e){m=!0,w=e}finally{try{!h&&y.return&&y.return()}finally{if(m)throw w}}A<1/0&&(A++,this._frameId=requestAnimationFrame(this.animationLoop.bind(this)))}}},{key:"score",get:function(){return this._score}},{key:"htmlRoot",get:function(){return this._htmlHelper.root}},{key:"difficulty",get:function(){return this._difficulty},set:function(e){this._difficulty=e}},{key:"canvas",get:function(){return this._htmlHelper.canvas}},{key:"_player",get:function(){return this._snakes[0]}},{key:"_enemies",get:function(){return this._snakes.slice(1)}}],[{key:"checkCollisions",value:function(e,t){for(var n=0;n<e.length;++n)for(var a=0;a<t.length;++a)if(e[n].equals(t[a]))return e[n].clone();return null}}]),e}();t.default=s,s.CELL_SIZE=25;var A=0},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";var a=new(function(e){return e&&e.__esModule?e:{default:e}}(n(3)).default)(document.getElementById("game_root"));window.game=a,console.log("Bundle loaded")},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),l=a(n(0)),o=a(n(3)),u=a(n(1)),f=a(n(7));!function(e){e[e.Player=0]="Player",e[e.Enemy=1]="Enemy"}(r||(r={}));var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._game=t}return i(e,[{key:"drawFood",value:function(e){this.drawCell(f.default.food,e.column,e.row,0)}},{key:"drawField",value:function(e){this._canvas.width=e.width*o.default.CELL_SIZE,this._canvas.height=e.height*o.default.CELL_SIZE;for(var t=0;t<e.width;++t)for(var n=0;n<e.height;++n)this.drawCell(f.default.fieldEmpty,t,n,0);var a=!0,r=!1,i=void 0;try{for(var l,u=e.blocks[Symbol.iterator]();!(a=(l=u.next()).done);a=!0){var c=l.value;this.drawCell(f.default.fieldWall,c.column,c.row,0)}}catch(e){r=!0,i=e}finally{try{!a&&u.return&&u.return()}finally{if(r)throw i}}}},{key:"drawSnake",value:function(e,t){for(var n=void 0,a=void 0,i=0;i<e.snake.length;++i){var o=void 0,c=void 0,d=void 0,s=void 0;if(0==i){var A=e.snake[i];switch(a=e.direction.reverse()){case l.default.Down:s=0;break;case l.default.Left:s=Math.PI/2;break;case l.default.Up:s=Math.PI;break;case l.default.Right:s=3*Math.PI/2}o=f.default.playerHead,c=A.column,d=A.row}else if(i==e.snake.length-1){var h=e.snake[i];switch(n=a.reverse()){case l.default.Up:s=0;break;case l.default.Right:s=Math.PI/2;break;case l.default.Down:s=Math.PI;break;case l.default.Left:s=3*Math.PI/2}o=f.default.playerTail,c=h.column,d=h.row}else{n=a.reverse();var m=e.snake[i],w=e.snake[i+1];m.row==w.row?u.default.mod(m.column+1,e.columns)==w.column?a=l.default.Right:u.default.mod(m.column-1,e.columns)==w.column&&(a=l.default.Left):m.column==w.column&&(u.default.mod(m.row+1,e.rows)==w.row?a=l.default.Down:u.default.mod(m.row-1,e.rows)==w.row&&(a=l.default.Up)),a==l.default.Left&&n==l.default.Right||a==l.default.Right&&n==l.default.Left?(o=f.default.playerStraight,s=Math.PI/2):a==l.default.Up&&n==l.default.Down||a==l.default.Down&&n==l.default.Up?(o=f.default.playerStraight,s=0):a==l.default.Up&&n==l.default.Right||a==l.default.Right&&n==l.default.Up?(o=f.default.playerRotate,s=0):a==l.default.Right&&n==l.default.Down||a==l.default.Down&&n==l.default.Right?(o=f.default.playerRotate,s=Math.PI/2):a==l.default.Down&&n==l.default.Left||a==l.default.Left&&n==l.default.Down?(o=f.default.playerRotate,s=Math.PI):(a==l.default.Left&&n==l.default.Up||a==l.default.Up&&n==l.default.Left)&&(o=f.default.playerRotate,s=3*Math.PI/2),c=m.column,d=m.row}switch(o){case f.default.playerHead:switch(t){case r.Player:o=f.default.playerHead;break;case r.Enemy:o=f.default.enemyHead}break;case f.default.playerRotate:switch(t){case r.Player:o=f.default.playerRotate;break;case r.Enemy:o=f.default.enemyRotate}break;case f.default.playerStraight:switch(t){case r.Player:o=f.default.playerStraight;break;case r.Enemy:o=f.default.enemyStraight}break;case f.default.playerTail:switch(t){case r.Player:o=f.default.playerTail;break;case r.Enemy:o=f.default.enemyTail}}this.drawCell(o,c,d,s)}}},{key:"drawCell",value:function(e,t,n,a){var r=this._canvas.getContext("2d");r.save(),r.translate(t*o.default.CELL_SIZE,n*o.default.CELL_SIZE),r.translate(o.default.CELL_SIZE/2,o.default.CELL_SIZE/2),r.rotate(a),r.drawImage(e,-o.default.CELL_SIZE/2,-o.default.CELL_SIZE/2,o.default.CELL_SIZE,o.default.CELL_SIZE),r.restore()}},{key:"_canvas",get:function(){return this._game.canvas}}]),e}();t.default=c,c.SnakeType=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};a.food=new Image,a.fieldEmpty=new Image,a.fieldWall=new Image,a.enemyHead=new Image,a.enemyTail=new Image,a.enemyStraight=new Image,a.enemyRotate=new Image,a.playerHead=new Image,a.playerTail=new Image,a.playerStraight=new Image,a.playerRotate=new Image,a.food.src=n(8),a.fieldEmpty.src=n(9),a.fieldWall.src=n(10),a.enemyHead.src=n(11),a.enemyTail.src=n(12),a.enemyStraight.src=n(13),a.enemyRotate.src=n(14),a.playerHead.src=n(15),a.playerTail.src=n(16),a.playerStraight.src=n(17),a.playerRotate.src=n(18),t.default=a},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTnU1rJkAAAAW0lEQVRIS+3NSwoAIAxDwV7F+x9SEQyIRPw1G+nAg65SC2FPTrldIvUBkugfSB6xB8gFGx57wgZnXWFDq46wgd2OsIFVV9jQrCdscMwFG0au5A9A/gDkD8InzArfwu+wergE2QAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAIAAABLixI0AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xOdTWsmQAAAApSURBVEhLY6AyaKAGGDWLNDBqFmlg1CzSwKhZpIFRs0gDg9ws6gAGBgBU+xmuCMgmOQAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAIAAABLixI0AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xOdTWsmQAAAAmSURBVEhLY3CgHhg1izQwahZpYNQs0sCoWaSBUbNIA6NmkQIcHADt0dTQuDtR2wAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xOdTWsmQAAABzSURBVEhL7cxBCsAgDERRT9P739CW0gGx32asWfrgbwKZsm3fjlpfpaHxviU0OOoXGoqa1jxLdHs+Te3jlUS3O1v/OJONnt1s9Oxmo2e3KTQQNY1Gon6hoVFLaLAvBQ2rNDSu0tC4SkPjKg2NqzQ0rkKlnP3K2OjUhp90AAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xOdTWsmQAAABTSURBVEhL7c2hDcBAEMTAryb9d/hBZo4U4GM3kunu+eW597OMjVPGxilj45SxccrYOGVsnDI2Thkbp4yNU8bGKWPjlLFxytg4pcYPMH6w1hp0zgvIjuLpVy41MAAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xOdTWsmQAAABkSURBVEhLrcyxDQAgEIDAn8b9N9SKDqMFl9AyX9be1zI2p4zNKWNzyticMjanjM0pY3PK2JwyNqeMzSljc8rYnDI2p4zNKWNzyticMjanjM0pY3PK2JwyNqeMzSljc8rYnJ5mDpa4dqwbqZseAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABl0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4xOdTWsmQAAABaSURBVEhL7cyxCcBAEAPBq8b9d/iOBA72QQIFDm5gQ2kszznXauhc1dC5qqFzVUPnqobOVQ2dqxo6VzV0/q2CjpMsNEyy0DDJQsMkCw2TbDR2i9CB01rrD2ZeG1xyZF3A6dwAAAAASUVORK5CYII="},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTnU1rJkAAAAiElEQVRIS+2MQQqFQAzF5v6XVvlE6A8ybe3WYDZjX9bHx5bj+iy/5jj8JKfvcGwnkx6OVGRa5y9wk7wxrRGHP2+yt0sSOR52JJHjYUcSOR52JJHjYUcSNTyuyLSOAxWZ9nBkJ5N3OPYkpzMcjXIyx+EoJ3McjnIyx+EoJ3McjnIyx+EoJxvWOgExoLpUIABYmgAAAABJRU5ErkJggg=="},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTnU1rJkAAAAaUlEQVRIS+2NOQrAMBDE9v+fzgEqBkEgMHZnYVUrxvOH63lfkvR4OCXp8XBK0uPhlKTHwylJj4dTkh4PpyQ9Hk5JejyckvR4OCXp8XBK0uPhlKTHwylJj4dTkjV4/JXTWrZ/cDgcdjJzA4EB0y3M9rbXAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTnU1rJkAAAAhElEQVRIS6WMMQrAQACD7v+fbjs4iNBSiMRNcv5wPXuTZKfHlmSnx5Zkp8eWZKfHlmSnx5Zkp8eWZKfHlmSnx5Zkp8eWZKfHlmSnx5Zkp8eWZKfHlmSnx5Zkp8eWZKfHlmSnx5Zkp8eWZKfHlmSnx5Zkp8eWZKfHlmSnx5Zkp8eW5INzbsODXLJd/56nAAAAAElFTkSuQmCC"},function(e,t){e.exports="data:image/png;charset=utf-8;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAYAAADE6YVjAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTnU1rJkAAAAbUlEQVRIS+2MMQ6AMAzE+v9PA4OHyBKh0Q0steLt4rXD9dybTHIcrjLJcbjKJMfhKpMch6tMchyuMslxuMokx+EqkxyHLbMMR6eS6fHTVDI9fppKpsdPU8n0+GkqmW/8OJHEHn7elffD4fAva92z41i2DcwJlgAAAABJRU5ErkJggg=="},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=a(n(0)),l=a(n(2)),o=a(n(1)),u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,null,[{key:"decide",value:function(e,t,n,a,r){var u=function(e){return e.row*r+e.column},f=function(e){var t=e/r|0,n=e%r;return new l.default(t,n)},c=function(e,t){return Math.min(Math.abs(e.row-t.row),a-Math.abs(e.row-t.row))+Math.min(Math.abs(e.column-t.column),r-Math.abs(e.column-t.column))},d=function(e){var t=e.clone();t.row=o.default.mod(t.row-1,a);var n=e.clone();n.row=o.default.mod(n.row+1,a);var i=e.clone();i.column=o.default.mod(i.column-1,r);var l=e.clone();l.column=o.default.mod(l.column+1,r);return[t,n,i,l].map(function(e){return u(e)}).filter(function(e){return!m.includes(e)})},s=function(e){var t=[];for(t.push(h);y.has(e);)e=y.get(e),t.push(e);return t},A=u(e),h=u(t),m=n.map(function(e){return u(e)}).filter(function(e){return e!=A&&e!=h}),w=new Set,p=new Set;p.add(A);var y=new Map,v=new Map;v.set(A,0);var g=new Map;for(g.set(A,c(e,t));p.size>0;){var _=void 0,k=1/0,b=!0,E=!1,C=void 0;try{for(var S,R=p[Symbol.iterator]();!(b=(S=R.next()).done);b=!0){var B=S.value,x=g.get(B);void 0==x&&(x=1/0),x<=k&&(_=B,k=x)}}catch(e){E=!0,C=e}finally{try{!b&&R.return&&R.return()}finally{if(E)throw C}}if(_==h){var U=s(_),M=f(U.pop()),I=f(U.pop());if(M.row==I.row){if(o.default.mod(M.column+1,r)==I.column)return i.default.Right;if(o.default.mod(M.column-1,r)==I.column)return i.default.Left}else if(M.column==I.column){if(o.default.mod(M.row+1,a)==I.row)return i.default.Down;if(o.default.mod(M.row-1,a)==I.row)return i.default.Up}return null}p.delete(_),w.add(_);var D=d(f(_)),L=!0,Q=!1,O=void 0;try{for(var j,T=D[Symbol.iterator]();!(L=(j=T.next()).done);L=!0){var P=j.value;if(!w.has(P)){p.add(P);var V=v.get(_);void 0==V&&(V=1/0);var Z=v.get(P);void 0==P&&(P=1/0);var H=V+1;H>=Z||(y.set(P,_),v.set(P,H),g.set(P,H+c(f(P),t)))}}}catch(e){Q=!0,O=e}finally{try{!L&&T.return&&T.return()}finally{if(Q)throw O}}}return null}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(21)),i=function(){function e(t,n){var a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._game=t,this._htmlRoot=n;var i=document.createElement("div"),l=document.createElement("canvas");i.appendChild(l),i.appendChild(document.createElement("br")),i.appendChild(document.createTextNode("Score: "));var o=document.createElement("span");i.appendChild(o),this._gameScore=o,this._canvas=l,this._gameProgress=i;var u=document.createElement("div"),f=document.createElement("input");f.type="number",f.min="1",f.max="60",f.value="10",u.appendChild(document.createTextNode("Difficulty: ")),u.appendChild(f),u.appendChild(document.createElement("br"));var c=document.createElement("select"),d=void 0;(d=document.createElement("option")).text="Infinite field",c.add(d),(d=document.createElement("option")).text="Box",c.add(d),(d=document.createElement("option")).text="Grid",c.add(d),u.appendChild(document.createTextNode("Field: ")),u.appendChild(c),u.appendChild(document.createElement("br"));var s=document.createElement("button");s.appendChild(document.createTextNode("Start")),s.onclick=function(){var e=Number(f.value),n=void 0;switch(c.selectedIndex){case 0:n=r.default.Inf;break;case 1:n=r.default.Box;break;case 2:n=r.default.Grid}return t.initGame(e,n)},u.appendChild(s),this._gameInit=u;var A=document.createElement("div");A.appendChild(document.createTextNode("You scored ")),this._finalScore=document.createElement("span"),A.appendChild(this._finalScore),A.appendChild(document.createElement("br"));var h=document.createElement("button");h.appendChild(document.createTextNode("Play again")),h.onclick=function(){return a.gameInit()},A.appendChild(h),this._gameOver=A}return a(e,[{key:"gameInit",value:function(){for(;this._htmlRoot.lastChild;)this._htmlRoot.removeChild(this._htmlRoot.lastChild);this._htmlRoot.appendChild(this._gameInit)}},{key:"gameProgress",value:function(){for(;this._htmlRoot.lastChild;)this._htmlRoot.removeChild(this._htmlRoot.lastChild);this._htmlRoot.appendChild(this._gameProgress)}},{key:"gameOver",value:function(){for(;this._htmlRoot.lastChild;)this._htmlRoot.removeChild(this._htmlRoot.lastChild);this._finalScore.innerHTML=String(this._game.score),this._htmlRoot.appendChild(this._gameOver)}},{key:"gameScore",set:function(e){this._gameScore.innerHTML=String(e)}},{key:"root",get:function(){return this._htmlRoot}},{key:"canvas",get:function(){return this._canvas}}]),e}();t.default=i},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=a(n(22)),l=a(n(23)),o=a(n(2)),u=a(n(0)),f=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._snakes=t,this._field=n}return r(e,[{key:"snakes",get:function(){return this._snakes}},{key:"field",get:function(){return this._field}}]),e}();t.default=f;var c=new l.default(24,30,[]),d=[new i.default(24,30,[new o.default(0,2),new o.default(0,1),new o.default(0,0)],u.default.Right),new i.default(24,30,[new o.default(21,0),new o.default(22,0),new o.default(23,0)],u.default.Up),new i.default(24,30,[new o.default(2,29),new o.default(1,29),new o.default(0,29)],u.default.Down),new i.default(24,30,[new o.default(23,27),new o.default(23,28),new o.default(23,29)],u.default.Left)];f.Inf=new f(d,c);for(var s=[],A=0;A<24;++A)for(var h=0;h<30;++h)0!=A&&0!=h&&23!=A&&29!=h||s.push(new o.default(A,h));var m=new l.default(24,30,s),w=[new i.default(24,30,[new o.default(2,4),new o.default(2,3),new o.default(2,2)],u.default.Right),new i.default(24,30,[new o.default(19,2),new o.default(20,2),new o.default(21,2)],u.default.Up),new i.default(24,30,[new o.default(4,27),new o.default(3,27),new o.default(2,27)],u.default.Down),new i.default(24,30,[new o.default(21,25),new o.default(21,26),new o.default(21,27)],u.default.Left)];f.Box=new f(w,m);for(var p=[],y=0;y<24;y+=2)for(var v=0;v<30;v+=2)p.push(new o.default(y,v));var g=new l.default(24,30,p),_=[new i.default(24,30,[new o.default(1,3),new o.default(1,2),new o.default(1,1)],u.default.Right),new i.default(24,30,[new o.default(21,1),new o.default(22,1),new o.default(23,1)],u.default.Up),new i.default(24,30,[new o.default(3,29),new o.default(2,29),new o.default(1,29)],u.default.Down),new i.default(24,30,[new o.default(23,27),new o.default(23,28),new o.default(23,29)],u.default.Left)];f.Grid=new f(_,g)},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),i=a(n(0)),l=a(n(1)),o=function(){function e(t,n,a,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._feed=!1,this._nextDirection=null,this._snake=[],this._alive=!0,this._rows=t,this._columns=n,this._direction=r,this._snake=a}return r(e,[{key:"move",value:function(){var e=null!=this._nextDirection?this._nextDirection:this.direction,t=this._snake[0].clone();switch(e){case i.default.Left:t.column=l.default.mod(t.column-1,this._columns);break;case i.default.Right:t.column=l.default.mod(t.column+1,this._columns);break;case i.default.Up:t.row=l.default.mod(t.row-1,this._rows);break;case i.default.Down:t.row=l.default.mod(t.row+1,this._rows)}this._feed||this._snake.pop(),this._snake.unshift(t),this._direction=e,this._nextDirection=null,this._feed=!1}},{key:"feed",value:function(){this._feed=!0}},{key:"clone",value:function(){return new e(this._rows,this._columns,l.default.arrayClone(this._snake),this._direction)}},{key:"rows",get:function(){return this._rows}},{key:"columns",get:function(){return this._columns}},{key:"snake",get:function(){return this._snake}},{key:"alive",get:function(){return this._alive},set:function(e){this._alive=e}},{key:"direction",get:function(){return this._direction},set:function(e){if(this._snake.length>1){if(e===i.default.Right&&this._direction===i.default.Left)return;if(e===i.default.Left&&this._direction===i.default.Right)return;if(e===i.default.Up&&this._direction===i.default.Down)return;if(e===i.default.Down&&this._direction===i.default.Up)return}this._nextDirection=e}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),i=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._width=n,this._height=t,this._blocks=a}return a(e,[{key:"clone",value:function(){return new e(this._height,this._width,r.default.arrayClone(this._blocks))}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"blocks",get:function(){return this._blocks}}]),e}();t.default=i}]);
//# sourceMappingURL=bundle.js.map